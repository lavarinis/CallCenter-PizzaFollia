var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var React=_interopRequireWildcard(require("react"));var _hoistNonReactStatics=_interopRequireDefault(require("hoist-non-react-statics"));var _SharedElementRendererView=_interopRequireDefault(require("./SharedElementRendererView"));var _SharedElementRendererData=_interopRequireDefault(require("./SharedElementRendererData"));var _createSharedElementScene=_interopRequireDefault(require("./createSharedElementScene"));var _SharedElementRendererContext=_interopRequireDefault(require("./SharedElementRendererContext"));var _SharedElementRendererProxy=require("./SharedElementRendererProxy");var _utils=require("./utils");var _jsxFileName="/Users/hein/repos/react/react-navigation-sharedelement/src/createSharedElementStackNavigator.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function createSharedElementEnabledNavigator(createNavigator,routeConfigs,navigatorConfig,rendererData){var wrappedRouteConfigs=_objectSpread({},routeConfigs);for(var key in routeConfigs){var routeConfig=wrappedRouteConfigs[key];var component=typeof routeConfig==='object'&&routeConfig.screen?routeConfig.screen:routeConfig;var wrappedComponent=(0,_createSharedElementScene.default)(component,rendererData);if(component===routeConfig){wrappedRouteConfigs[key]=wrappedComponent;}else{wrappedRouteConfigs[key]=_objectSpread({},routeConfig,{screen:wrappedComponent});}}return createNavigator(wrappedRouteConfigs,_objectSpread({},navigatorConfig,{onTransitionStart:function onTransitionStart(transitionProps,prevTransitionProps){var index=transitionProps.index,position=transitionProps.position;var prevIndex=prevTransitionProps.index;if(index===prevIndex)return;rendererData.startTransition(position.interpolate({inputRange:[index-1,index],outputRange:index>prevIndex?[0,1]:[2,1]}),(0,_utils.getActiveRouteState)(transitionProps.scene.route),(0,_utils.getActiveRouteState)(prevTransitionProps.scene.route));if(navigatorConfig&&navigatorConfig.onTransitionStart){navigatorConfig.onTransitionStart((0,_utils.getActiveRouteState)(transitionProps.scene.route),(0,_utils.getActiveRouteState)(prevTransitionProps.scene.route));}},onTransitionEnd:function onTransitionEnd(transitionProps,prevTransitionProps){rendererData.endTransition(transitionProps.scene.route,prevTransitionProps.scene.route);if(navigatorConfig&&navigatorConfig.onTransitionEnd){navigatorConfig.onTransitionEnd(transitionProps,prevTransitionProps);}}}));}function createSharedElementStackNavigator(createNavigator,RouteConfigs,NavigatorConfig){var rendererDataProxy=new _SharedElementRendererProxy.SharedElementRendererProxy();var SharedElementNavigator=createSharedElementEnabledNavigator(createNavigator,RouteConfigs,NavigatorConfig,rendererDataProxy);var SharedElementRenderer=function(_React$Component){(0,_inherits2.default)(SharedElementRenderer,_React$Component);function SharedElementRenderer(){(0,_classCallCheck2.default)(this,SharedElementRenderer);return(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(SharedElementRenderer).apply(this,arguments));}(0,_createClass2.default)(SharedElementRenderer,[{key:"render",value:function render(){var _this=this;return React.createElement(_SharedElementRendererContext.default.Consumer,{__source:{fileName:_jsxFileName,lineNumber:92}},function(rendererData){if(rendererData){rendererDataProxy.source=rendererData;return React.createElement(SharedElementNavigator,(0,_extends2.default)({},_this.props,{__source:{fileName:_jsxFileName,lineNumber:98}}));}else{_this.rendererData=_this.rendererData||new _SharedElementRendererData.default();rendererDataProxy.source=_this.rendererData;return React.createElement(_SharedElementRendererContext.default.Provider,{value:_this.rendererData,__source:{fileName:_jsxFileName,lineNumber:106}},React.createElement(SharedElementNavigator,(0,_extends2.default)({},_this.props,{__source:{fileName:_jsxFileName,lineNumber:109}})),React.createElement(_SharedElementRendererView.default,{rendererData:_this.rendererData,__source:{fileName:_jsxFileName,lineNumber:110}}));}});}}]);return SharedElementRenderer;}(React.Component);(0,_hoistNonReactStatics.default)(SharedElementRenderer,SharedElementNavigator);return SharedElementRenderer;}var _default=createSharedElementStackNavigator;exports.default=_default;
//# sourceMappingURL=createSharedElementStackNavigator.js.map