import _extends from"@babel/runtime/helpers/extends";import _classCallCheck from"@babel/runtime/helpers/classCallCheck";import _createClass from"@babel/runtime/helpers/createClass";import _possibleConstructorReturn from"@babel/runtime/helpers/possibleConstructorReturn";import _getPrototypeOf from"@babel/runtime/helpers/getPrototypeOf";import _inherits from"@babel/runtime/helpers/inherits";import _defineProperty from"@babel/runtime/helpers/defineProperty";var _jsxFileName="/Users/hein/repos/react/react-navigation-sharedelement/src/createSharedElementStackNavigator.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import hoistNonReactStatics from'hoist-non-react-statics';import SharedElementRendererView from'./SharedElementRendererView';import SharedElementRendererData from'./SharedElementRendererData';import createSharedElementScene from'./createSharedElementScene';import SharedElementRendererContext from'./SharedElementRendererContext';import{SharedElementRendererProxy}from'./SharedElementRendererProxy';import{getActiveRouteState}from'./utils';function createSharedElementEnabledNavigator(createNavigator,routeConfigs,navigatorConfig,rendererData){var wrappedRouteConfigs=_objectSpread({},routeConfigs);for(var key in routeConfigs){var routeConfig=wrappedRouteConfigs[key];var component=typeof routeConfig==='object'&&routeConfig.screen?routeConfig.screen:routeConfig;var wrappedComponent=createSharedElementScene(component,rendererData);if(component===routeConfig){wrappedRouteConfigs[key]=wrappedComponent;}else{wrappedRouteConfigs[key]=_objectSpread({},routeConfig,{screen:wrappedComponent});}}return createNavigator(wrappedRouteConfigs,_objectSpread({},navigatorConfig,{onTransitionStart:function onTransitionStart(transitionProps,prevTransitionProps){var index=transitionProps.index,position=transitionProps.position;var prevIndex=prevTransitionProps.index;if(index===prevIndex)return;rendererData.startTransition(position.interpolate({inputRange:[index-1,index],outputRange:index>prevIndex?[0,1]:[2,1]}),getActiveRouteState(transitionProps.scene.route),getActiveRouteState(prevTransitionProps.scene.route));if(navigatorConfig&&navigatorConfig.onTransitionStart){navigatorConfig.onTransitionStart(getActiveRouteState(transitionProps.scene.route),getActiveRouteState(prevTransitionProps.scene.route));}},onTransitionEnd:function onTransitionEnd(transitionProps,prevTransitionProps){rendererData.endTransition(transitionProps.scene.route,prevTransitionProps.scene.route);if(navigatorConfig&&navigatorConfig.onTransitionEnd){navigatorConfig.onTransitionEnd(transitionProps,prevTransitionProps);}}}));}function createSharedElementStackNavigator(createNavigator,RouteConfigs,NavigatorConfig){var rendererDataProxy=new SharedElementRendererProxy();var SharedElementNavigator=createSharedElementEnabledNavigator(createNavigator,RouteConfigs,NavigatorConfig,rendererDataProxy);var SharedElementRenderer=function(_React$Component){_inherits(SharedElementRenderer,_React$Component);function SharedElementRenderer(){_classCallCheck(this,SharedElementRenderer);return _possibleConstructorReturn(this,_getPrototypeOf(SharedElementRenderer).apply(this,arguments));}_createClass(SharedElementRenderer,[{key:"render",value:function render(){var _this=this;return React.createElement(SharedElementRendererContext.Consumer,{__source:{fileName:_jsxFileName,lineNumber:92}},function(rendererData){if(rendererData){rendererDataProxy.source=rendererData;return React.createElement(SharedElementNavigator,_extends({},_this.props,{__source:{fileName:_jsxFileName,lineNumber:98}}));}else{_this.rendererData=_this.rendererData||new SharedElementRendererData();rendererDataProxy.source=_this.rendererData;return React.createElement(SharedElementRendererContext.Provider,{value:_this.rendererData,__source:{fileName:_jsxFileName,lineNumber:106}},React.createElement(SharedElementNavigator,_extends({},_this.props,{__source:{fileName:_jsxFileName,lineNumber:109}})),React.createElement(SharedElementRendererView,{rendererData:_this.rendererData,__source:{fileName:_jsxFileName,lineNumber:110}}));}});}}]);return SharedElementRenderer;}(React.Component);hoistNonReactStatics(SharedElementRenderer,SharedElementNavigator);return SharedElementRenderer;}export default createSharedElementStackNavigator;
//# sourceMappingURL=createSharedElementStackNavigator.js.map